(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function F(t){const e=R(t),n=S(t),r=new Map(n.map(i=>[i.key,i])),s=new Set;return n.map(i=>{if(i.fields.crossref){const a=i.fields.crossref,l=r.get(a);if(l)return s.add(a),{...i,fields:{...l.fields,...i.fields}}}return i}).filter(i=>!s.has(i.key)).map(i=>A(i,e)).filter(i=>i!==null)}function R(t){const e={},n=/@string\s*\{\s*(\w+)\s*=\s*\{([^}]*)\}\s*\}/gi;let r;for(;(r=n.exec(t))!==null;)e[r[1].toLowerCase()]=r[2].trim();return e}function S(t){const e=[],n=/@(\w+)\s*\{\s*([^,\s]+)\s*,/g;let r,s=0;for(;(r=n.exec(t))!==null;){const o=r[1].toLowerCase(),i=r[2],a=r.index+r[0].length;if(["preamble","string","comment"].includes(o))continue;const l=N(t,a);if(l){const p=D(l);e.push({type:o,key:i,fields:p,index:s++})}}return e}function N(t,e){let n=1,r=e;for(;r<t.length&&n>0;)t[r]==="{"?n++:t[r]==="}"&&n--,r++;return n===0?t.slice(e,r-1):null}function D(t){const e={},n=/(\w+)\s*=\s*(?:\{([^{}]*(?:\{[^{}]*\}[^{}]*)*)\}|"([^"]*)"|(\w+))/g;let r;for(;(r=n.exec(t))!==null;){const s=r[1].toLowerCase(),o=r[2]||r[3]||r[4]||"";e[s]=s==="note"?o.trim():E(o.trim())}return e}function E(t){return t?t.replace(/\$\^[\{]?([^\$\}]+)[\}]?\$/g,"<sup>$1</sup>").replace(/\^\{([^}]+)\}/g,"<sup>$1</sup>").replace(/\$_[\{]?([^\$\}]+)[\}]?\$/g,"<sub>$1</sub>").replace(/_\{([^}]+)\}/g,"<sub>$1</sub>").replace(/\\href\{([^}]*)\}\{([^}]*)\}/g,"$2").replace(/\\url\{([^}]*)\}/g,"$1").replace(/\\&/g,"&").replace(/\\\\/g,"").replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\`/g,"`").replace(/\\~/g,"~").replace(/\\textit\{([^}]*)\}/g,"<em>$1</em>").replace(/\\textbf\{([^}]*)\}/g,"<strong>$1</strong>").replace(/\\emph\{([^}]*)\}/g,"<em>$1</em>").replace(/[\{\}]/g,"").replace(/\$/g,"").replace(/\\coe/g,"*").replace(/\s+/g," ").trim():""}function A(t,e){const n=t.fields;let r=n.booktitle||n.journal||"";const s=r.toLowerCase();e[s]&&(r=e[s]),r=r.replace(/#\s*"-?/g," ").replace(/-?"/g,"").trim();let o=n.url||null;if(n.note){const c=n.note.match(/https?:\/\/[^\s}]+(?:pdf|html|org)?/i);c&&(o=c[0])}if(!o&&n.note&&n.note.includes("http")){const c=n.note.match(/(https?:\/\/[^\s]+)/);c&&(o=c[1])}let i="misc";const a=t.type.toLowerCase();if(a==="inproceedings"||a==="conference"?i="conference":a==="article"?i="journal":a==="book"||a==="booklet"||a==="incollection"?i="book":a==="techreport"?i="techreport":(a==="phdthesis"||a==="mastersthesis")&&(i="thesis"),a==="misc"||a==="unpublished")return null;let l=n.url||null;if(l&&(l=l.replace(/\\url\{([^}]*)\}/g,"$1").replace(/[\{\}]/g,"")),n.note){const c=n.note.match(/https?:\/\/[^\s}]+(?:pdf|html|org)?/i);c&&(!l||c[0].toLowerCase().includes(".pdf"))&&(o=c[0])}const p=o||l,h={conference:1,journal:2,techreport:3,preprint:4,misc:5};return{key:t.key,type:i,typePriority:h[i]||99,title:n.title||"Untitled",authors:H(n.author||""),year:parseInt(n.year)||0,venue:E(r),pages:n.pages||"",doi:n.doi||null,url:p,doi:n.doi||null,url:p,note:n.note?E(n.note):null,publisher:n.publisher||null,volume:n.volume||null,number:n.number||null,originalIndex:t.index}}function H(t){return t?t.split(/\s+and\s+/i).map(n=>{if(n=n.replace(/\$\^[^$]*\$/g,"").trim(),n.includes(",")){const r=n.split(",").map(s=>s.trim());if(r.length>=2)return`${r[1]} ${r[0]}`}return n}).join(", "):""}function _(t){const e={};return t.forEach(r=>{const s=r.year||"Unknown";e[s]||(e[s]=[]),e[s].push(r)}),Object.keys(e).sort((r,s)=>(parseInt(s)||0)-(parseInt(r)||0)).map(r=>{const s=e[r].sort((o,i)=>o.typePriority-i.typePriority);return{year:r,publications:s}})}function V(t){const e={journal:"Journal Articles",conference:"Conference Papers",preprint:"Preprints",techreport:"Technical Reports",misc:"Other"},n={};return t.forEach(s=>{const o=s.type||"misc";n[o]||(n[o]=[]),n[o].push(s)}),["conference","journal","techreport","preprint","misc"].filter(s=>n[s]&&n[s].length>0).map(s=>({year:e[s]||s,publications:n[s].sort((o,i)=>(i.year||0)-(o.year||0))}))}function Y(t){return[{year:"All Publications",publications:t.sort((e,n)=>(e.originalIndex||0)-(n.originalIndex||0))}]}function z(t){const e=t.trim().split(`
`);if(e.length<2)return[];const n=k(e[0]).map(o=>o.toLowerCase().trim()),r={title:u(n,["title","paper","paper title"]),authors:u(n,["author","authors","author(s)"]),year:u(n,["year","date","publication year","pub year"]),venue:u(n,["venue","journal","conference","booktitle","publication"]),type:u(n,["type","publication type","entry type"]),doi:u(n,["doi"]),url:u(n,["url","link"]),pages:u(n,["pages","page"]),volume:u(n,["volume","vol"]),number:u(n,["number","issue"]),publisher:u(n,["publisher"]),abstract:u(n,["abstract"])},s=[];for(let o=1;o<e.length;o++){const i=e[o].trim();if(!i)continue;const a=k(i),l=W(a,r,o);l.title&&s.push(l)}return s}function k(t){const e=[];let n="",r=!1;for(let s=0;s<t.length;s++){const o=t[s],i=t[s+1];o==='"'?r&&i==='"'?(n+='"',s++):r=!r:o===","&&!r?(e.push(n.trim()),n=""):n+=o}return e.push(n.trim()),e}function u(t,e){for(const n of e){const r=t.indexOf(n);if(r!==-1)return r}return-1}function W(t,e,n){const r=y=>y>=0&&y<t.length?t[y]:"",s=r(e.title),o=r(e.authors),i=r(e.year),a=r(e.venue),l=r(e.type);let p=0;if(i){const y=i.match(/\d{4}/);y&&(p=parseInt(y[0]))}let h="misc";const c=l.toLowerCase();c.includes("conference")||c.includes("inproceedings")?h="conference":c.includes("article")||c.includes("journal")?h="article":(c.includes("preprint")||c.includes("arxiv"))&&(h="preprint");const O=X(o);return{key:`csv_entry_${n}`,type:h,title:s||"Untitled",authors:O,year:p,venue:a,pages:r(e.pages),doi:r(e.doi)||null,url:r(e.url)||null,pdfUrl:null,eprint:null,publisher:r(e.publisher)||null,volume:r(e.volume)||null,number:r(e.number)||null}}function X(t){if(!t)return"";let e=t.split(/\s*;\s*|\s+and\s+/i).map(n=>n.trim()).filter(n=>n.length>0);if(e.length===1&&e[0].includes(",")){const n=e[0].split(",").map(r=>r.trim());n.length>2&&(e=n)}return e.join(", ")}function q(t,e){if(e.innerHTML="",!t||t.length===0){e.innerHTML=`
            <div class="empty-state">
                <span class="empty-icon">ðŸ“–</span>
                <p>No publications found</p>
            </div>
        `;return}t.forEach((n,r)=>{const s=document.createElement("div");s.className="year-group",s.style.animationDelay=`${r*.1}s`,s.innerHTML=`
            <div class="year-header">
                <span class="year-badge">${n.year}</span>
                <span class="year-count">${n.publications.length} publication${n.publications.length!==1?"s":""}</span>
            </div>
            <div class="year-publications">
                ${n.publications.map((o,i)=>K(o,i,n.year==="All Publications"||isNaN(n.year))).join("")}
            </div>
        `,e.appendChild(s)})}function K(t,e,n=!1){const r=J(t),s=t.pdfUrl||t.url||t.doi?`<a href="${t.pdfUrl||t.url||`https://doi.org/${t.doi}`}" target="_blank" rel="noopener">${b(t.title)}</a>`:b(t.title);return`
        <article class="pub-card" style="animation-delay: ${e*.05}s">
            <div class="pub-type-indicator ${t.type}"></div>
            <div class="pub-content">
                <h3 class="pub-title">${s}</h3>
                <p class="pub-authors">${b(t.authors)}</p>
                <div class="pub-venue">
                    <span class="pub-type-badge ${t.type}">${Q(t.type)}</span>
                    ${t.venue?`<span>${b(t.venue)}</span>`:""}
                    ${n&&t.year?`<span>(${t.year})</span>`:""}
                    ${t.pages?`<span>pp. ${t.pages}</span>`:""}
                </div>
                ${r.length>0?`
                    <div class="pub-links">
                        ${r.join("")}
                    </div>
                `:""}
            </div>
        </article>
    `}function J(t){const e=[];return t.pdfUrl&&e.push(`<a href="${t.pdfUrl}" class="pub-link" target="_blank" rel="noopener">PDF</a>`),t.doi&&e.push(`<a href="https://doi.org/${t.doi}" class="pub-link" target="_blank" rel="noopener">DOI</a>`),t.eprint&&e.push(`<a href="https://arxiv.org/abs/${t.eprint}" class="pub-link" target="_blank" rel="noopener">arXiv</a>`),e}function Q(t){return{conference:"Conference",journal:"Journal",book:"Book",techreport:"Tech Report",thesis:"Thesis",preprint:"Preprint",misc:"Other"}[t]||"Other"}function Z(t){if(!t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}function b(t){return t?Z(t).replace(/&lt;sup&gt;/g,"<sup>").replace(/&lt;\/sup&gt;/g,"</sup>").replace(/&lt;sub&gt;/g,"<sub>").replace(/&lt;\/sub&gt;/g,"</sub>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>"):""}function G(t){const e=t.length,n=new Set(t.map(s=>s.year).filter(s=>s>0)),r=new Set(t.map(s=>s.venue).filter(s=>s));document.getElementById("totalPubs").textContent=e,document.getElementById("totalYears").textContent=n.size,document.getElementById("totalVenues").textContent=r.size,document.getElementById("stats-section").style.display="block"}let L="bib",d=[],x="year",$="";const C=document.getElementById("fileInput"),f=document.getElementById("dropZone"),v=document.getElementById("urlInput"),M=document.getElementById("loadUrlBtn"),ee=document.getElementById("publications-container"),te=document.getElementById("filtersSection"),I=document.getElementById("loadingOverlay"),T=document.querySelectorAll(".group-btn"),ne=document.getElementById("exportFormat"),re=document.getElementById("searchInput"),U=document.getElementById("excludePreprints"),se="https://raw.githubusercontent.com/dynaroars/latex-cv/main/cv.bib";function oe(){ie();const e=new URLSearchParams(window.location.search).get("bib"),n=e||se;if(e){document.body.classList.add("show-mode");const r=document.querySelector(".upload-box");r&&(r.style.display="none")}v.value=n,P(n)}function ie(){C.addEventListener("change",ae),f.addEventListener("dragover",le),f.addEventListener("dragleave",ce),f.addEventListener("drop",ue),f.addEventListener("click",t=>{t.target.tagName!=="INPUT"&&t.target.tagName!=="BUTTON"&&!t.target.closest(".url-row")&&C.click()}),M.addEventListener("click",t=>{t.stopPropagation(),P(v.value)}),v.addEventListener("keydown",t=>{t.key==="Enter"&&P(v.value)}),v.addEventListener("click",t=>{t.stopPropagation()}),T.forEach(t=>{t.addEventListener("click",()=>{T.forEach(e=>e.classList.remove("active")),t.classList.add("active"),x=t.dataset.group,w()})}),ne.addEventListener("change",t=>{t.target.value&&d.length>0&&(de(t.target.value),t.target.value="")}),re.addEventListener("input",t=>{$=t.target.value.toLowerCase().trim(),w()}),U.addEventListener("change",()=>{w()})}function ae(t){const e=t.target.files[0];e&&B(e)}function le(t){t.preventDefault(),t.stopPropagation(),f.classList.add("drag-over")}function ce(t){t.preventDefault(),t.stopPropagation(),f.classList.remove("drag-over")}function ue(t){t.preventDefault(),t.stopPropagation(),f.classList.remove("drag-over");const e=t.dataTransfer.files[0];e&&(e.name.endsWith(".bib")||e.name.endsWith(".bibtex")||e.name.endsWith(".csv"))?B(e):g("Please drop a valid .bib or .csv file")}function B(t){m(!0),L=t.name.endsWith(".csv")?"csv":"bib";const e=new FileReader;e.onload=n=>j(n.target.result,L),e.onerror=()=>{m(!1),g("Failed to read file")},e.readAsText(t)}async function P(t){if(!t){g("Please enter a URL");return}try{new URL(t)}catch{g("Please enter a valid URL");return}t.includes("github.com")&&t.includes("/blob/")&&(t=t.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),v.value=t),L=t.toLowerCase().endsWith(".csv")?"csv":"bib",m(!0);try{let e,n;try{if(e=await fetch(t),!e.ok)throw new Error(`HTTP ${e.status}`)}catch(s){n=s,e=null}if(!e)try{const s=`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`;if(e=await fetch(s),!e.ok)throw new Error(`HTTP ${e.status}`)}catch(s){n=s,e=null}if(!e)try{const s=`https://corsproxy.io/?${encodeURIComponent(t)}`;if(e=await fetch(s),!e.ok)throw new Error(`HTTP ${e.status}`)}catch(s){n=s,e=null}if(!e)throw n||new Error("Failed to fetch from all sources");const r=await e.text();j(r,L)}catch(e){m(!1),g(`Failed to load file: ${e.message}`)}}function j(t,e){try{if(d=e==="csv"?z(t):F(t),d.length===0){m(!1),g(`No publications found in the ${e.toUpperCase()} file`);return}G(d),w(),te.style.display="flex",m(!1)}catch(n){m(!1),g(`Failed to parse ${e.toUpperCase()}: ${n.message}`),console.error("Parse error:",n)}}function w(){let t=d;$&&(t=t.filter(r=>{var o;return[r.title,r.authors,r.venue,(o=r.year)==null?void 0:o.toString(),r.type].filter(Boolean).join(" ").toLowerCase().includes($)})),U.checked&&(t=t.filter(r=>r.type!=="preprint"));let e;x==="year"?e=_(t):x==="type"?e=V(t):e=Y(t),q(e,ee);const n=document.getElementById("searchCount");n&&(n.textContent=$?`Showing ${t.length} of ${d.length}`:"")}function m(t){t?I.classList.remove("hidden"):I.classList.add("hidden")}function g(t){const e=document.createElement("div");e.style.cssText=`
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        padding: 1rem 2rem;
        background: #333;
        color: white;
        font-weight: 500;
        z-index: 1000;
        animation: fadeIn 0.3s ease;
    `,e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0",e.style.transition="opacity 0.3s ease",setTimeout(()=>e.remove(),300)},4e3)}function de(t){let e,n,r;switch(t){case"bibtex":e=pe(d),n="publications.bib",r="text/plain";break;case"csv":e=fe(d),n="publications.csv",r="text/csv";break;default:return}me(e,n,r)}function pe(t){return t.map(e=>{let r=`@${e.type==="article"?"article":e.type==="conference"?"inproceedings":"misc"}{${e.key},
`;return r+=`  title = {${e.title}},
`,r+=`  author = {${e.authors}},
`,e.year&&(r+=`  year = {${e.year}},
`),e.venue&&(e.type==="article"?r+=`  journal = {${e.venue}},
`:r+=`  booktitle = {${e.venue}},
`),e.pages&&(r+=`  pages = {${e.pages}},
`),e.doi&&(r+=`  doi = {${e.doi}},
`),e.url&&(r+=`  url = {${e.url}},
`),e.volume&&(r+=`  volume = {${e.volume}},
`),e.number&&(r+=`  number = {${e.number}},
`),e.publisher&&(r+=`  publisher = {${e.publisher}},
`),r+=`}
`,r}).join(`
`)}function fe(t){const e=["Title","Authors","Year","Type","Venue","Pages","DOI","URL"],n=t.map(r=>[`"${(r.title||"").replace(/"/g,'""')}"`,`"${(r.authors||"").replace(/"/g,'""')}"`,r.year||"",r.type||"",`"${(r.venue||"").replace(/"/g,'""')}"`,r.pages||"",r.doi||"",r.url||""]);return[e.join(","),...n.map(r=>r.join(","))].join(`
`)}function me(t,e,n){const r=new Blob([t],{type:n}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}oe();
